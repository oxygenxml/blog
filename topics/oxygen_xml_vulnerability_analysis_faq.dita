<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="topic_udq_swp_xrb">
    <title>Log4Shell - Oxygen XML Vulnerability Analysis FAQ</title>
    <prolog>
        <author>cristi_talau</author>
        <critdates>
            <created date="2021-12-15"/>
        </critdates>
        <metadata>
            <keywords>
                <keyword outputclass="label">Security</keyword>
            </keywords>
        </metadata>
    </prolog>
    <body>
        <p>NIST has announced a recent vulnerability (<xref
                href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228" format="html"
                scope="external">CVE-2021-44228</xref>) in the <xref
                href="https://logging.apache.org/log4j/2.x/index.html" format="html"
                scope="external">Apache Log4j</xref> library. Syncro Soft has released a new
            critical security advisory <xref
                href="https://www.oxygenxml.com/security/advisory/CVE-2021-44228.html" format="html"
                scope="external">CVE-2021-44228</xref> and prepared this page containing frequently
            asked questions and answers related to this vulnerability and its impact on our software
            products.</p>
        <p>Because of the ubiquity of the log4j component, the situation is still developing. Please
            subscribe to our Security Advisories mailing list (found on the top of the <xref
                href="https://www.oxygenxml.com/security/advisories.html" format="html"
                scope="external">Security Advisories page</xref> ), and revisit this page
            periodically to get the latest information.</p>
        <ol id="ul_sxk_czp_xrb">
            <li>How to protect against this vulnerability?<ul id="ul_txk_czp_xrb">
                    <li>Upgrade to the latest version of our products. We have already released new
                        minor bug fix versions for our products. For example, for Oxygen XML
                        Editor/Author/Developer versions 24.0, 23.1, and 22.1.</li>
                    <li>If you cannot upgrade to the latest version, patch or update the Log4j
                        library.</li>
                </ul></li>
            <li>How can I patch or update the Log4j library?<ul id="ol_vtc_31f_yrb">
                    <li>If you are using one of these products:<ul id="ul_lkb_ln1_zrb">
                            <li>Oxygen XML Editor/Author/Developer standalone installation</li>
                            <li>Oxygen XML Editor/Author/Developer plugin for Eclipse
                                installation</li>
                        </ul>you can use our free tool (<xref
                            href="https://github.com/oxygenxml/oxygen-log4j-patcher" format="html"
                            scope="external"/>) to upgrade the Log4j 2.x libraries or to remove the
                        problematic <codeph>JndiLookup</codeph> class from inside them. <p>The
                            recommended Oxygen versions to apply this tool on range from 16.1 to
                            22.1 inclusively.</p></li>
                    <li>If you are using Oxygen Content Fusion, you can use the Content Fusion Log4j
                        Patcher: <xref
                            href="https://github.com/oxygenxml/content-fusion-log4j-patcher"
                            format="html" scope="external"
                            >https://github.com/oxygenxml/content-fusion-log4j-patcher</xref>.</li>
                    <li>For other scenarios:<ul id="ul_zqw_pn1_zrb">
                            <li>Scan your system for occurrences of the <codeph>log4j-core</codeph>
                                JAR file.</li>
                            <li>Stop your running Java application (e.g. Oxygen XML Editor).</li>
                            <li>Delete the <codeph>JndiLookup</codeph> class from those JAR files.
                                For example, use the following command on a Linux system:
                                <codeblock id="codeblock_ymv_21f_yrb">zip -q -d log4j-core-*.jar org/apache/logging/log4j/core/lookup/JndiLookup.class</codeblock></li>
                        </ul></li>
                </ul></li>
            <li>Am I still vulnerable if I set the <codeph>-Dlog4j2.formatMsgNoLookups=true</codeph>
                system property?<ul id="ul_pyk_czp_xrb">
                    <li>Although our products do not meet the preconditions for <xref
                            href="https://www.oxygenxml.com/security/advisory/CVE-2021-45046.html"
                            format="html" scope="external">CVE-2021-45046</xref>, setting this
                        system property is no longer considered to offer bullet-proof
                        protection.</li>
                </ul></li>
            <li>Am I still vulnerable if I set the environment variable:
                    <codeph>LOG4J_FORMAT_MSG_NO_LOOKUPS="true"</codeph>?<ul id="ul_tyk_czp_xrb">
                    <li>Although our products do not meet the preconditions for <xref
                            href="https://www.oxygenxml.com/security/advisory/CVE-2021-45046.html"
                            format="html" scope="external">CVE-2021-45046</xref>, setting this
                        environment variable is no longer considered to offer bullet-proof
                        protection.</li>
                </ul></li>
            <li>
                <p>Are there components that may have this problem used by the application outside
                    of the Oxygen installation folder?</p>
                <ul id="ul_fhd_wvz_yrb">
                    <li>Oxygen add-ons may come bundled with Log4j 2.x libraries. Update all your
                        add-ons to their latest version by using the <uicontrol>Help->Check for
                            add-ons updates</uicontrol> menu action.</li>
                    <li>The Oxygen application may have external tools configured in the
                            <uicontrol>Preferences->External Tools</uicontrol> page. Check that your
                        external tools do not use Java processes that may have this problem.</li>
                    <li>You may have configured extra JAR libraries used for validation or
                        transformation scenarios. Check that all of these separate libraries do not
                        contain the Log4j 2.x libraries. </li>
                    <li>There may be data sources (for example, for connections to Exist DB servers)
                        created in the <uicontrol>Preferences->Data Sources</uicontrol> page that
                        have references to Log4j 2.x libraries. If this is the case, update your
                        connection libraries to the latest ones provided for the latest server
                        installation.</li>
                    <li>You may run DITA publishing using an external DITA Open Toolkit publishing
                        engine that has older versions for the bundled Log4j 2.x libraries provided
                        by the Oxygen-specific publishing plugins. Update the Oxygen plugins used by
                        the custom DITA Open Toolkit to the latest versions available on our
                        website.</li>
                </ul>
            </li>
            <li>I am using the Oxygen SDK and cannot upgrade. How can I upgrade just the Log4j
                    library?<ul id="ol_rzm_mhz_xrb">
                    <li>Make sure that you do not have the version of Log4j hard-coded in your
                            <filepath>pom.xml</filepath> file.</li>
                    <li>You can control the version of log4j to include by adding the following
                        configuration in the <codeph>dependencyManagement</codeph> section of the
                            <filepath>pom.xml</filepath> file of your
                        project:<codeblock id="codeblock_jzl_n3z_xrb" outputclass="language-xml">&lt;dependency>
  &lt;groupId>org.apache.logging.log4j&lt;/groupId>
  &lt;artifactId>log4j-bom&lt;/artifactId>
  &lt;version>2.16&lt;/version>
  &lt;type>pom&lt;/type>
  &lt;scope>import&lt;/scope>
&lt;/dependency></codeblock></li>
                    <li>To test which version of log4j your Maven project uses, run:<codeph>mvn
                            dependency:list -DincludeGroupIds=org.apache.logging.log4j
                        -U</codeph>.</li>
                    <li>If you are using the <codeph>web-author-component</codeph> artifact, you can
                        use a <xref
                            href="https://maven.apache.org/plugins/maven-war-plugin/overlays.html"
                            format="html" scope="external">Maven WAR Overlay</xref> to replace the
                        packaged log4j library distributed with a newer version.</li>
                </ul></li>
            <li>Am I still vulnerable if I block all outbound traffic?<ul id="ul_uyk_czp_xrb">
                    <li>If you block ALL the outbound traffic, you may be safe, but:<ul
                            id="ul_vyk_czp_xrb">
                            <li>Be sure to block also DNS traffic, as it can exfiltrate data such as
                                environment variables.</li>
                            <li>Be sure to re-assess which servers are trusted - maybe some trusted
                                servers had the same vulnerability and were exploited.</li>
                        </ul></li>
                    <li>Regardless, it is a very good idea to restrict outbound traffic from Oxygen
                        tools. This will protect you against various types of vulnerabilities.</li>
                </ul></li>
            <li>Am I still vulnerable if I use a new version of Java?<ul id="ul_zyk_czp_xrb">
                    <li>The vulnerability is known to exist with the latest versions of Java (e.g. >
                        1.8u191) if you are also using <xref
                            href="https://github.com/veracode-research/rogue-jndihttps://github.com/veracode-research/rogue-jndi"
                            format="html" scope="external">Apache Tomcat or Websphere</xref>. If you
                        are not using those servers, you may still be vulnerable, but we are not
                        aware of any exploits.</li>
                </ul></li>
            <li>Should I remove the JndiLookup class?<ul id="ul_azk_czp_xrb">
                    <li>Yes. Removing it will remove the vulnerable code. We have high confidence
                        that other problems will not be generated.</li>
                </ul></li>
            <li>Should I set firewall rules based on HTTP headers or URLs to block attacks?<ul
                    id="ul_czk_czp_xrb">
                    <li>These kind of rules do not offer full protection. The URLs that exploit the
                        vulnerability can be written in various ways and are not recognized by
                        common WAF rules that you might find.</li>
                </ul></li>
            <li>How to test if I am vulnerable?<ul id="ul_dzk_czp_xrb">
                    <li>If you did not apply any mitigation, you can assume you are.</li>
                </ul></li>
            <li>Should I do anything if the affected server is deployed inside the intranet?<ul
                    id="ul_ezk_czp_xrb">
                    <li>Yes. The attack can be triggered from another server that was exploited or
                        by one of the employees when they follow a link in a phishing email.</li>
                </ul></li>
            <li>Should I upgrade to the latest version of your products?<ul id="ul_jzk_czp_xrb">
                    <li>Yes. New maintenance builds that avoid this vulnerability are available for
                        versions that are in the maintenance period.</li>
                </ul></li>
            <li>Is this vulnerability related to Java being insecure?<ul id="ul_kzk_czp_xrb">
                    <li>No. It is caused by an open-source component called log4j that had a
                        vulnerability. This component is widely used in the Java ecosystem.</li>
                </ul></li>
            <li>How is Syncro Soft addressing the problem?<ul id="ul_lzk_czp_xrb">
                    <li>We patched all our public servers against this vulnerability.</li>
                    <li>We provided a security advisory with current solutions (<xref
                            href="https://www.oxygenxml.com/security/advisory/CVE-2021-44228.html"
                            format="html" scope="external"/>) and we produced maintenance builds
                        that remove the vulnerable version of log4j for all product versions that
                        are under maintenance. We are working on solutions for older versions.</li>
                    <li>We analyzed and updated our internal servers to make sure they are not
                        vulnerable.</li>
                    <li>We scanned the logs of the services we use or provide to look for the
                        pattern that triggers the vulnerability.</li>
                </ul></li>
        </ol>
    </body>
    <related-links>
        <link href="https://www.lunasec.io/docs/blog/log4j-zero-day/" format="html" scope="external"/>
        <link
            href="https://msrc-blog.microsoft.com/2021/12/11/microsofts-response-to-cve-2021-44228-apache-log4j2/"
            format="html" scope="external"/>
        <link href="https://www.oxygenxml.com/security/advisory/CVE-2021-44228.html" format="html"
            scope="external"/>
    </related-links>
</topic>
